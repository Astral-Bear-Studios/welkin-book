//SPDX-FileCopyrightText: 2023 Oscar Bender-Stone <oscarbenderstone@gmail.com>
//SPDX-License-Identifier: CC-BY-4.0

#import base.txt
#override term

term = "@".directive | construct | graph | conection | member | unit
directive = attribute
attribute = "import".tuple -> import
            | "self" -> self
            | "parse".tuple[] -> parse
            | "input".graph -> output
            | "validate".graph[unit] -> validate // TODO: add very simple conditions in validate.
            | "record".graph[unit] -> record // TODO: come up with better names for record and output
            | "output".graph -> output
            | "attribute".graph[empty, term] -> attribute
            | unit.term -> custom_attribute
construct ::= operation | tuple | list | series | all_terms
operation ::= term.tuple | term unit term
list ::= "[" term "," (term ",")* ","? "]"
tuple ::= "(" term "," (term ",")* ","? ")"
series ::= term "," (term ",")
all_terms ::= "*"
import base.txt

// Included in base.txt
graph       = unit? "{" term "}"
connections = term (connector term)+
connector   = "-" term "-" -> edge
            | "-" term ">" -> left_arrow
            | "<" term "-" -> right_arrow
member      = unit? ("."(ident | string) | "#"num)+
unit        = ident | string | num
ident       = CHAR*
string      = STRING
num         = NUMBER
